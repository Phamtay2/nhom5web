<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title><%= htmlWebpackPlugin.options.title %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
     <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/css/toastr.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="./style.css" media="screen" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <style type="text/css">
    @import url(https://unpkg.com/@webpixels/css@1.1.5/dist/index.css);

@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap');
*{
  font-family: 'Quicksand', sans-serif;
}

.content{
  padding-top: 50px;
}
td{
  padding: 4px 10px !important;
  font-size: 14px !important;
}
th{
  font-size: 14px !important;
  text-align: center;
  font-weight: 600 !important;
  color: #000 !important;
}
.cke_dialog_container 
{
  z-index: 20000
}
.cke_inner.cke_maximized {
  top: 0px !important;
}
.cke_browser_webkit{
  margin-top: 12px !important;
}
input[type="text"],textarea, select, input[type="file"], input[type="datetime-local"], img{
margin-top: 8px;
border-radius: 0 !important;
border: 1px solid #CCCCCC !important;
}
textarea.form-control {
  min-height: calc(0.9em + 1.3rem + 2px) !important;
}
.form-control{
  padding: 7px 15px !important;
}
label{
  font-size: 15px !important;
  color: #000;
}
.modal-header,.modal-footer{
  border-radius: 0 !important;
}
.modal-content{
  border-radius: 2px;
}
#pagination {
  list-style: none;
  display: flex;
  justify-content: right;
  padding: 10px;
}

#pagination li {
  padding: 2px 8px;
  border: 1px solid #ccc;
  cursor: pointer;
  display: inline-block;
  font-size: 12px;
}

#pagination li:hover {
  background-color: #f2f2f2;
}

#pagination li a {
  text-decoration: none;
  color: #333;
  font-size: 12px;
}

#pagination li.active {
  background-color: #1c84c6;
  color: #fff;
  font-size: 12px;
}

#itemsPerPage{
  padding: 5px 10px;
  border: 1px solid #DDDDDD;
  margin: 10px;
  width: 100%;
}
.col-pageinfo{
  padding: 10px;
}
.col-pageinfo table{
  margin-left: 12px; 
}
.col-pageinfo table,td,th{
  border: 1px solid #e7eaec;
}
#itemCount, #paginationInfo {
  font-size: 14px;    
  color: #333; 
}
.search-container {
  margin: 10px 10px 0 0;
  display: flex;
  justify-content: right;
  align-items: end;
}

/* Style for the search input */
.search-input {
  padding: 5px 10px;
  border: 1px solid #ccc;
  margin: 0 !important;
  width: 100%;
}
.search-input:focus{
  border-color: #4CAF50;
  outline: none;
}

/* Style for the search button */
.search-button {
  padding: 5px 10px;
  background-color: #1c84c6;
  color: white;
  border: 1px solid #1c84c6;
  cursor: pointer;
}
#hienthi-dropdown {
  list-style: none;
  display: flex;
  justify-content: left;
  padding: 10px;
  margin: 0 !important;
}

#hienthi-dropdown li{
  padding: 5px 10px;
  border: 1px solid #DDDDDD;
}

#hienthi-dropdown li.selected {
  background-color: #4CAF50;
  color: white;
}

/* Hiệu ứng hover cho thẻ li */
#hienthi-dropdown li:hover {
  background-color: #ddd;
  cursor: pointer;
}
.card{
  border-radius: 0px !important;
}
.table-responsive{
  padding: 10px;
}
table{
  border: 1px solid #DDDDDD;
}
.nav-link{
  font-size: 15px !important;
}
.nav-link:hover{
  color: #000 !important;
}
#filterDanhmuc,#filterThuonghieu,#filterstatus,#filterDuyet{
  padding: 7px 10px;
  border: 1px solid #DDDDDD;
  margin-top: 5px;
  width: 100%;
}
.card-header{
  padding: 10px;
}
table a{
  color: #1c84c6;
  font-weight: 600;
}
.btn-primary{
  background-color: #1c84c6;
  border-color: #1c84c6;
}
.btn-primary:hover{
  background-color: #1c84c6;
  border-color: #1c84c6;
}

.modal-overlay {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.5);
z-index: 9999;
}

.modaladd {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
background-color: #fff;
padding: 20px;
border-radius: 5px;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
overflow-y: auto;
width: 80%;
max-height: 95%;
max-width: 1600px;
}

.modal-headerr {
display: flex;
justify-content: space-between;
align-items: center;
border-bottom: 1px solid #ccc;
padding-bottom: 10px;
}

.modal-headerr h2 {
margin: 0;
}

.modal-bodyy {
padding: 20px 0;
}
.modal-footerr{
display: flex;
justify-content: space-between;
align-items: center;
border-top: 1px solid #ccc;
padding-top: 10px;
}
.navbar-vertical.navbar-expand-lg {
  transition: width 0.4s ease-in-out;
}
#toggleButton{
  background: none !important;
}
</style>
  <body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/js/toastr.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="https://cdn.jsdelivr.net/npm/diacritics"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js" integrity="sha512-DdX/YwF5e41Ok+AI81HI8f5/5UsoxCVT9GKYZRIzpLxb8Twz4ZwPPX+jQMwMhNQ9b5+zDEefc+dcvQoPWGNZ3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/javascript">
      CKFinder.setupCKEditor();
      if(document.getElementById('editor1')){
          CKEDITOR.replace( 'editor1' );
      }
      if(document.getElementById('editor2')){
          CKEDITOR.replace( 'editor2' );
      }
      if(document.getElementById('editor1_update')){
          CKEDITOR.replace( 'editor1_update' );
      }
      if(document.getElementById('editor2_update')){
          CKEDITOR.replace( 'editor2_update' ); 
      }
      if(document.getElementById('editor1_copy')){
          CKEDITOR.replace( 'editor1_copy' );
      }
      if(document.getElementById('editor2_copy')){
          CKEDITOR.replace( 'editor2_copy' );
      }
             
    </script>
    <script type="text/javascript">
    var apiBaseURL = 'http://localhost/viettel5gdatanew';
    // window.onscroll = function() {scrollFunction()};
    //   function scrollFunction() {
    //     if (document.body.scrollTop > 150  || document.documentElement.scrollTop > 150) {
    //       document.getElementById("add-update").style.position="fixed";
    //       document.getElementById("add-update").style.top="10px";
    //       document.getElementById("add-update").style.right="30px";
    //     } else {
    //       document.getElementById("add-update").style.position="unset";
    //     }
    //   }
    function updateUrl() {
    var tieudeInput = document.getElementById('tieude');
    var tieudeInputUpdate = document.getElementById('tieude_update');
    var tieudeInputCopy = document.getElementById('tieude_copy');
    var urlInput = document.getElementById('url');
    var urlInputUpdate = document.getElementById('url_update');
    var urlInputCopy = document.getElementById('url_copy');
    var cuPhapInput = document.getElementById('cuphap');
    var cuPhapInputUpdate = document.getElementById('cuphap_update');
    var cuPhapInputCopy = document.getElementById('cuphap_copy');
    
    var tieudeValue = tieudeInput.value;
    var tieudeValueUpdate = tieudeInputUpdate.value;
    var tieudeValueCopy = tieudeInputCopy.value;
    // Loại bỏ dấu và thay thế dấu cách bằng gạch
    var urlValue = removeDiacriticsAndConvert(tieudeValue).toLowerCase().replace(/ /g, '-');
    var urlValueUpdate = removeDiacriticsAndConvert(tieudeValueUpdate).toLowerCase().replace(/ /g, '-');
    var urlValueCopy = removeDiacriticsAndConvert(tieudeValueCopy).toLowerCase().replace(/ /g, '-');
    var cuphapValue = tieudeValue + ' AK';
    var cuphapValueUpdate = tieudeValueUpdate + ' AK';
    var cuphapValueCopy = tieudeValueCopy + ' AK';
    
    urlInput.value = urlValue;
    urlInputUpdate.value = urlValueUpdate;
    urlInputCopy.value = urlValueCopy;
    cuPhapInput.value = cuphapValue;
    cuPhapInputUpdate.value = cuphapValueUpdate;
    cuPhapInputCopy.value = cuphapValueCopy;
    }
    
    function updateOtherUrl() {
    var tieudeInput = document.getElementById('tieude');
    var urlInput = document.getElementById('url');
    var tieudeInputU = document.getElementById('tieude_update');
    var urlInputU = document.getElementById('url_update');
    
    var tieudeValue = tieudeInput.value;
    // Loại bỏ dấu và thay thế dấu cách bằng gạch
    var urlValue = removeDiacriticsAndConvert(tieudeValue).toLowerCase().replace(/ /g, '-');
    
    urlInput.value = urlValue;
    
    var tieudeValueU = tieudeInputU.value;
    // Loại bỏ dấu và thay thế dấu cách bằng gạch
    var urlValueU = removeDiacriticsAndConvert(tieudeValueU).toLowerCase().replace(/ /g, '-');
    
    urlInputU.value = urlValueU;
    }
    
    function updateCopyUrl() {
    var tieudeInputU = document.getElementById('tieude_copy');
    var urlInputU = document.getElementById('url_copy');
    
    var tieudeValueU = tieudeInputU.value;
    // Loại bỏ dấu và thay thế dấu cách bằng gạch
    var urlValueU = removeDiacriticsAndConvert(tieudeValueU).toLowerCase().replace(/ /g, '-');
    
    urlInputU.value = urlValueU;
    }
    
    
    function removeDiacriticsAndConvert(str) {
    return str.normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/đ/g, 'd').replace(/Đ/g, 'D');
    }
    
    function formatPrice(inputId,outputId) {
    var inputValue = document.getElementById(inputId).value;
    
    var numericValue = parseFloat(inputValue.replace(/,/g, ''));
    if (isNaN(numericValue)) {
      return;
    }
    
    var formattedValue = formatNumberWithCommas(numericValue);
    
    document.getElementById(inputId).value = formattedValue;
    
    document.getElementById(outputId).value = numericValue;
    }
    
    function formatNumberWithCommas(number) {
    return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
    
    var isthoigian = document.getElementById('thoigian');
    
    if(isthoigian){
      $(document).ready(function () {
          var now = new Date();
      now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
      document.getElementById('thoigian').value = now.toISOString().slice(0,16);
      
      });
    }
    
    
    function resetForm() {
      var form = document.getElementById("myForm");
      form.reset();
      CKEDITOR.instances.editor1.setData('');
      CKEDITOR.instances.editor2.setData('');
      CKEDITOR.instances.editor3.setData('');
    }
    
    function resetFormkhac() {
    var form = document.getElementById('formkhac');
    var inputs = form.getElementsByTagName('input');
    var textareas = form.getElementsByTagName('textarea');
    
    for (var i = 0; i < inputs.length; i++) {
      if (inputs[i].type !== 'hidden' && inputs[i].id !== 'idvinhvien') {
        inputs[i].value = '';
      }
    }
    
    for (var j = 0; j < textareas.length; j++) {
      textareas[j].value = '';
    }
    CKEDITOR.instances.editor1.setData('');
    CKEDITOR.instances.editor2.setData('');
    CKEDITOR.instances.editor3.setData('');
    }
    function deleteItem(id) {
      Swal.fire({
          title: 'Xác nhận xóa',
          text: 'Bạn có chắc muốn xóa?',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Có',
          cancelButtonText: 'Không'
      }).then((result) => {
          if (result.isConfirmed) {
              performDelete(id);
          }
      });
    }
    function updateStatus(id, status) {
      Swal.fire({
          title: 'Xác nhận cập nhật',
          text: 'Bạn có chắc muốn đổi trạng thái?',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Có',
          cancelButtonText: 'Không'
      }).then((result) => {
          if (result.isConfirmed) {
              updateStatusBefore(id, status);
          }
      });
    }
    
    function updateAccept(id, status) {
      Swal.fire({
          title: 'Xác nhận cập nhật',
          text: 'Bạn có thay đổi duyệt?',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Có',
          cancelButtonText: 'Không'
      }).then((result) => {
          if (result.isConfirmed) {
              updateAcceptBefore(id, status);
          }
      });
    }
    
    var searchInput = document.getElementById('search');
    if(searchInput){
      searchInput.addEventListener('keydown', function (event) {
          if (event.key === 'Enter') {
              fetchDataByPage();
          }
      });
    }
    
      var searchButton = document.querySelector('.search-button');
    
    if(searchButton){
      searchButton.addEventListener('click', function () {
          fetchDataByPage();
      });
    }    
      
    var cotrangkhong = document.getElementById('itemsPerPage');
      if(cotrangkhong){
          var currentPage = 1;
          var itemsPerPage = cotrangkhong.value;
          document.querySelector('#hienthi-dropdown li[value="0"]').classList.add('selected');
    
          var hienthiDropdown = document.getElementById('hienthi-dropdown');
          var hienthiOptions = hienthiDropdown.getElementsByTagName('li');
    
          for (var i = 0; i < hienthiOptions.length; i++) {
              hienthiOptions[i].addEventListener('click', function() {
                  for (var j = 0; j < hienthiOptions.length; j++) {
                      hienthiOptions[j].classList.remove('selected');
                  }
                  this.classList.add('selected');
                  fetchDataByPage();
              });
          }
      }
      function displayPage(data) {
    var totalPages = Math.ceil(data.total / itemsPerPage);
    var maxPagesToShow = 6;
    var step = 3; // Number of pages to step forward/backward
    
    document.getElementById('itemCount').innerHTML = `Tổng: ${data.total}`;
    document.getElementById('paginationInfo').innerHTML = `Page ${currentPage} of ${totalPages}`;
    
    var paginationContainer = document.getElementById('pagination');
    paginationContainer.innerHTML = '';
    
    function createPageLink(page, text) {
      var pageLink = document.createElement('li');
      pageLink.textContent = text;
      pageLink.addEventListener('click', function (event) {
          event.preventDefault();
          currentPage = page;
          fetchDataByPage();
          updateActivePageStyle();
      });
      return pageLink;
    }
    
    var firstPageLink = createPageLink(1, '<<');
    paginationContainer.appendChild(firstPageLink);
    
    if (currentPage > step + 1) {
      var ellipsisBackLink = document.createElement('li');
      ellipsisBackLink.textContent = '...';
      ellipsisBackLink.addEventListener('click', function (event) {
          event.preventDefault();
          currentPage = Math.max(1, currentPage - step);
          fetchDataByPage();
          updateActivePageStyle();
      });
      paginationContainer.appendChild(ellipsisBackLink);
    }
    
    var startPage = Math.max(1, currentPage - Math.floor(maxPagesToShow / 2));
    var endPage = Math.min(totalPages, startPage + maxPagesToShow - 1);
    
    if (endPage - startPage < maxPagesToShow) {
      startPage = Math.max(1, endPage - maxPagesToShow + 1);
    }
    
    for (var i = startPage; i <= endPage; i++) {
      var pageLink = createPageLink(i, i);
      paginationContainer.appendChild(pageLink);
    }
    
    if (endPage < totalPages - step) {
      var ellipsisForwardLink = document.createElement('li');
      ellipsisForwardLink.textContent = '...';
      ellipsisForwardLink.addEventListener('click', function (event) {
          event.preventDefault();
          currentPage = Math.min(totalPages, currentPage + step);
          fetchDataByPage();
          updateActivePageStyle();
      });
      paginationContainer.appendChild(ellipsisForwardLink);
    }
    
    var lastPageLink = createPageLink(totalPages, '>>');
    paginationContainer.appendChild(lastPageLink);
    
    function updateActivePageStyle() {
      var pageLinks = document.querySelectorAll('#pagination li');
      pageLinks.forEach(function (link) {
          link.classList.remove('active');
      });
    
      var currentPageLink = Array.from(pageLinks).find(link => parseInt(link.textContent) === currentPage);
      if (currentPageLink) {
          currentPageLink.classList.add('active');
      }
    }
    
    updateActivePageStyle();
    }
    
      function changeItemsPerPage() {
          var selectedValue = document.getElementById('itemsPerPage').value;
          itemsPerPage = parseInt(selectedValue);
          fetchDataByPage();
      }
    
    
    
    function showaddModal(){
    document.getElementById('modalAdd').style.display = 'block';
    }
    function closeaddModal(){
    document.getElementById('modalAdd').style.display = 'none';
    }
    
    function showupdateModal(){
    document.getElementById('modalUpdate').style.display = 'block';
    }
    function closeupdateModal(){
    document.getElementById('modalUpdate').style.display = 'none';
    }
    
    function closecopyModal(){
    document.getElementById('modalCopy').style.display = 'none';
    }
    
    function toggleButton(){
    if (document.getElementById('navbarVertical').style.width == '0px') {
      document.getElementById('navbarVertical').style.width = '100%';
    } else {
      document.getElementById('navbarVertical').style.width = '0px';
    }
    }
    
    
    </script>
  </body>
</html>
